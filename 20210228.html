<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
            // 实现一个深度拷贝
            function deepCopy(obj) {
              let val = new Object();
              for (let key in obj) {
                if (typeof obj[key] == "object") {
                  val[key] = deepCopy(obj[key]);
                  console.log(val[key]);
                } else {
                  val[key] = obj[key];
                }
              }
              return val;
            }
            let obj = {
              a: "3",
              b: {
                b: 5,
              },
            };
            let copyVal = deepCopy(obj);
            console.log(obj, copyVal);
            copyVal.b.b = "4";
            console.log(obj, copyVal);

            //同步任务 - 先进先出微任务-宏任务
            const p = Promise.resolve();
            (async () => {
              await p;
              console.log("await end");
            })();
            p.then(() => {
              console.log("then 1");
            }).then(() => {
              console.log("then 2");
            });
            // await end
            // then1
            //  then2
            // 立即执行函数执行函数体-1-2

            const p = Promise.resolve();
               async function async4444() {
             await p;
             console.log("await end");
            }
           p.then(() => {
              console.log("then 1");
          }).then(() => {
           console.log("then 2");
            });
            async4444()

    //         then 1
    //         await end
    //        then 2


            async function async1() {
              let res = await async2();
              console.log(res);
              console.log("微任务比较");
            }
            async function async2() {
              console.log("async2");
              return "yn2";
            }

            async1();

            new Promise((resolve,reject)=>{
                console.log('promise')
                resolve()
            }).then(()=>{
                console.log('promise then')
            })
    </script>
  </body>
</html>
