<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <img
      src="https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1603365312,3218205429&fm=26&gp=0.jpg"
      id="test"
    />
    <canvas id="canvas" width="100" height="100"></canvas>
    <div id="getCanvasImg"></div>
    <div id="getImgCanvas"></div>
    <script>
      // canvas img 相互转换
      let canvas = document.getElementById("canvas");
      let ctx = canvas.getContext("2d");
      ctx.rect(0, 0, 100, 100);
      ctx.fillStyle = "red";
      ctx.fill();
      ctx.strokeText("Hello World!", 10, 50);

      //
      let canvasImg = new Image();
      canvasImg.src = canvas.toDataURL("image/png"); //base 64
      document.getElementById("getCanvasImg").append(canvasImg);
      console.log(canvasImg);
      // img 转化为canvas
      let img = document.getElementById("test");
      img.onload = function () {
        let imgcanvas = document.createElement("canvas");
        imgcanvas.width = img.width;
        imgcanvas.height = img.height;
        let c = imgcanvas.getContext("2d");
        c.drawImage(img, 0, 0, img.width, img.height);
        document.getElementById("getImgCanvas").append(imgcanvas);
      };
    </script>
  </body>
</html>
